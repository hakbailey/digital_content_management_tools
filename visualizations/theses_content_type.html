<!DOCTYPE html>
<html lang="en">
    <head>
      <meta charset="utf-8">
      <title>Theses Content Type</title>
      <script type="text/javascript" src="d3/d3.v3.js"></script>
			<style type="text/css">
				svg .primaryBucket {
					fill: white;
					stroke: black;
					stroke-width: 4;				
				}
			</style>
    </head>

    <body>
      <script type="text/javascript">
      var jsonData = "data/theses.json"
			
			var xVals = [];
			var yVals = [];
			
			var w = 1200;
			var h = 600;
			
			for (var i = 0; i < jsonData.length; i++) {
				var newValx = Math.round(Math.random() * (w - 200) + 100);
				xVals.push(newValx);
			}

			for (var i = 0; i < jsonData.length; i++) {			
				var newValy = Math.round(Math.random() * (h - 200) + 100);
				yVals.push(newValy);
			}

			var diameter = 960,
				format = d3.format(",d"),
				color = d3.scale.category20c();

			var bubble = d3.layout.pack()
				.sort(null)
				.size([diameter, diameter])
				.padding(1.5);
			
			var svg = d3.select("body")
						.append("svg")
						.attr("width", diameter)
						.attr("height", diameter)
						.attr("class", "bubble");

  		var node = svg.selectAll(".node")
      	.data(bubble.nodes(classes(root))
      		.filter(function(d) { return !d.children; }))
    		.enter().append("g")
      		.attr("class", "node")
      		.attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; });

  			node.append("title")
      		.text(function(d) { return d.className + ": " + format(d.value); });

  			node.append("circle")
      		.attr("r", function(d) { return d.r; });

  			node.append("text")
      		.attr("dy", ".3em")
      		.style("text-anchor", "middle")
      		.text(function(d) { return d.className.substring(0, d.r / 3); });

						
			// svg.selectAll("circle")
			// 	.data(jsonData)
			// 	.enter()
			// 	.append("circle")
			// 	.attr("cx", function(d, i) {
			// 		return xVals[i];
			// 	})
			// 	.attr("cy", function(d, i) {
			// 		return yVals[i];
			// 	})
			// 	.attr("r", 30)
			// 	.attr("class", "primaryBucket");

			svg.selectAll("text")
				.data(jsonData)
				.enter()
				.append("text")
				.text(function(d) {
					return d.results.bindings.bucketName.literal.value;
				})
				.attr("x", function(d, i) {
					return xVals[i];
				})
				.attr("y", function(d, i) {
					return yVals[i] + 45;
				})
				.attr("font-family", "sans-serif")
				.attr("font-size", "11px")
				.attr("font-weight", "bold")
				.attr("text-anchor", "middle");
				
		</script>
    </body>
</html>